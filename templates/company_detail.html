{% extends 'base.html' %}

{% block title %}{{ company.name }} | پروفایل شرکت{% endblock %}

{% block content %}
<div class="container py-5">
    
    <!-- بخش هدر پروفایل شرکت -->
    <div class="glass-panel p-5 rounded-4 mb-5 position-relative overflow-hidden text-center text-md-start">
        <!-- افکت نوری پس‌زمینه -->
        <div class="position-absolute top-0 start-50 translate-middle bg-primary rounded-circle" style="width: 300px; height: 300px; filter: blur(150px); opacity: 0.2; z-index: -1;"></div>

        <div class="row align-items-center">
            <!-- لوگوی شرکت -->
            <div class="col-md-3 text-center mb-3 mb-md-0">
                <div class="bg-white bg-opacity-10 p-4 rounded-circle d-inline-flex align-items-center justify-content-center border border-white border-opacity-25" style="width: 150px; height: 150px;">
                    {% if company.logo %}
                        <img src="{{ company.logo.url }}" alt="{{ company.name }}" class="img-fluid rounded-circle">
                    {% else %}
                        <i class="fas fa-building text-white" style="font-size: 4rem;"></i>
                    {% endif %}
                </div>
            </div>
            
            <!-- اطلاعات متنی -->
            <div class="col-md-9">
                <h1 class="fw-bold text-white mb-2">{{ company.name }}</h1>
                
                <div class="d-flex flex-wrap gap-3 text-white-50 mb-4 justify-content-center justify-content-md-start">
                    {% if company.location %}
                        <span><i class="fas fa-map-marker-alt me-1 text-warning"></i> {{ company.location }}</span>
                    {% endif %}
                    {% if company.website %}
                        <a href="{{ company.website }}" target="_blank" class="text-white-50 text-decoration-none hover-text-white">
                            <i class="fas fa-globe me-1 text-info"></i> وبسایت
                        </a>
                    {% endif %}
                    <span><i class="fas fa-briefcase me-1 text-success"></i> {{ jobs|length }} آگهی فعال</span>
                </div>

                <!-- توضیحات شرکت -->
                <div class="bg-black bg-opacity-25 p-3 rounded-3 text-white-50" style="backdrop-filter: blur(5px);">
                    <h5 class="text-white mb-2 fs-6">درباره ما:</h5>
                    <p class="mb-0 small">
                        {% if company.description %}
                            {{ company.description|linebreaks }}
                        {% else %}
                            توضیحاتی برای این شرکت ثبت نشده است.
                        {% endif %}
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- بخش آگهی‌های این شرکت -->
    <h3 class="text-white mb-4 fw-bold border-bottom border-white border-opacity-10 pb-2 d-inline-block">
        <i class="fas fa-bullhorn text-warning me-2"></i>فرصت‌های شغلی {{ company.name }}
    </h3>

    {% if jobs %}
        <div class="row g-4">
            {% for job in jobs %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 bg-transparent border border-white border-opacity-10 rounded-4 glass-hover text-white">
                    <div class="card-body p-4">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <h5 class="card-title fw-bold text-white">{{ job.title }}</h5>
                            <span class="badge bg-primary bg-opacity-25 text-primary border border-primary border-opacity-25 rounded-pill">
                                {{ job.get_job_type_display }}
                            </span>
                        </div>
                        <p class="card-text text-white-50 small mb-4">
                            <i class="fas fa-clock me-1"></i> {{ job.created_at|timesince }} پیش
                        </p>
                        <a href="{% url 'jobs:job_detail' job.pk %}" class="btn btn-outline-light w-100 rounded-pill btn-sm stretched-link">
                            مشاهده جزئیات شغلی
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info bg-transparent border-info text-info rounded-3">
            <i class="fas fa-info-circle me-2"></i> در حال حاضر هیچ آگهی فعالی برای این شرکت وجود ندارد.
        </div>
    {% endif %}

</div>

<style>
    .glass-hover {
        transition: transform 0.3s ease, background 0.3s ease;
        background: rgba(255, 255, 255, 0.05);
    }
    .glass-hover:hover {
        transform: translateY(-5px);
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.3) !important;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }
    .hover-text-white:hover {
        color: white !important;
    }
</style>
{% endblock %}
